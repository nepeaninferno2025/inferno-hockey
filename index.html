<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Inferno Nepean Hockey</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" href="assets/inferno-logo.png">

<style>
:root{
  --bg:#0b0b0b;
  --card:#171717;
  --accent:#ff4500;
  --text:#f2f2f2;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Segoe UI,Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
}
header{
  background:linear-gradient(90deg,#7b0000,#ff4500);
  padding:20px 40px 60px;
  position:relative;
}
.brand{
  display:flex;
  align-items:center;
  gap:16px;
}
.brand img{height:70px}
nav{
  margin-top:10px;
  display:flex;
  gap:16px;
  flex-wrap:wrap;
}
nav a{
  color:#fff;
  font-weight:600;
  cursor:pointer;
  text-decoration:none;
}
nav .admin,nav .logout{
  border:1px solid #fff;
  padding:4px 12px;
  border-radius:20px;
}
.logout{display:none}

/* Banner */
.banner{
  position:absolute;
  bottom:0;
  left:0;
  width:100%;
  height:36px;
  background:#111;
  overflow:hidden;
  border-top:2px solid var(--accent);
}
.banner-track{
  display:flex;
  gap:60px;
  padding-left:100%;
  white-space:nowrap;
  animation:slide 28s linear infinite;
}
.banner-track span{
  color:#ff7a3d;
  font-weight:600;
}
@keyframes slide{
  from{transform:translateX(0)}
  to{transform:translateX(-100%)}
}

main{
  max-width:1200px;
  margin:auto;
  padding:80px 20px 40px;
}
section{display:none}
section.active{display:block}

.card{
  background:var(--card);
  padding:28px;
  border-radius:14px;
  box-shadow:0 10px 25px rgba(0,0,0,.5);
}
h2{
  margin-top:0;
  border-left:6px solid var(--accent);
  padding-left:12px;
}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:16px;
}
th,td{
  border:1px solid #2a2a2a;
  padding:8px;
  text-align:center;
}
th{background:#111;color:var(--accent)}
textarea,input,button{
  width:100%;
  margin-top:10px;
  padding:8px;
  border-radius:6px;
  border:none;
}
textarea,input{background:#0f0f0f;color:#fff}
button{background:var(--accent);font-weight:700;cursor:pointer}

.admin-only{display:none}

.btn{
  padding:4px 8px;
  border:none;
  border-radius:5px;
  cursor:pointer;
}
.edit{background:orange}
.delete{background:red;color:#fff}
.save{background:green;color:#fff}
.cancel{background:#777;color:#fff}
</style>
</head>

<body>

<header>
  <div class="brand">
    <img src="assets/inferno-logo.png">
    <h1>Inferno Nepean Hockey</h1>
  </div>

  <nav>
    <a onclick="show('roster')">Roster</a>
    <a onclick="show('league')">League</a>
    <a onclick="show('coaches')">Coaches</a>
    <a onclick="show('schedule')">Schedule</a>
    <a onclick="show('results')">Results</a>
    <a onclick="show('news')">News</a>
    <a onclick="show('record')">Record</a>
    <a class="admin" onclick="show('admin')">Admin</a>
    <a class="logout" id="logoutBtn" onclick="logout()">Logout</a>
  </nav>

  <div class="banner">
    <div class="banner-track">
      <span>Upcoming Game • Dec 30</span>
      <span>Inferno 5–2 Win Last Game</span>
      <span>Next Game Jan 5 • Nepean Arena</span>
    </div>
  </div>
</header>

<main>

<section id="admin">
  <div class="card">
    <h2>Admin Login</h2>
    <input id="user" placeholder="Username">
    <input id="pass" type="password" placeholder="Password">
    <button onclick="login()">Login</button>
  </div>
</section>

<section id="roster" class="active">
  <div class="card">
    <h2>Roster</h2>
    <table>
      <thead><tr><th>Name</th><th>Pos</th><th>#</th><th>Actions</th></tr></thead>
      <tbody id="rosterBody"></tbody>
    </table>
    <textarea id="rosterInput" class="admin-only" placeholder="Name | Position | Number"></textarea>
    <button class="admin-only" onclick="add('roster')">Add Player</button>
  </div>
</section>

<section id="league">
  <div class="card">
    <h2>League Standings</h2>
    <table>
      <thead><tr><th>Team</th><th>GP</th><th>W</th><th>L</th><th>T</th><th>PTS</th><th>Actions</th></tr></thead>
      <tbody id="leagueBody"></tbody>
    </table>
    <textarea id="leagueInput" class="admin-only" placeholder="Team | GP | W | L | T | PTS"></textarea>
    <button class="admin-only" onclick="add('league')">Add Team</button>
  </div>
</section>

<section id="coaches">
  <div class="card">
    <h2>Coaches</h2>
    <table>
      <thead><tr><th>Name</th><th>Role</th><th>Actions</th></tr></thead>
      <tbody id="coachesBody"></tbody>
    </table>
    <textarea id="coachesInput" class="admin-only" placeholder="Name | Role"></textarea>
    <button class="admin-only" onclick="add('coaches')">Add Coach</button>
  </div>
</section>

<section id="schedule">
  <div class="card">
    <h2>Schedule</h2>
    <table>
      <thead><tr><th>Date</th><th>Opponent</th><th>Location</th><th>Actions</th></tr></thead>
      <tbody id="scheduleBody"></tbody>
    </table>
    <textarea id="scheduleInput" class="admin-only" placeholder="YYYY-MM-DD | Opponent | Location"></textarea>
    <button class="admin-only" onclick="add('schedule')">Add Game</button>
  </div>
</section>

<section id="results">
  <div class="card">
    <h2>Results</h2>
    <table>
      <thead><tr><th>Date</th><th>Opponent</th><th>Score</th><th>Actions</th></tr></thead>
      <tbody id="resultsBody"></tbody>
    </table>
    <textarea id="resultsInput" class="admin-only" placeholder="Date | Opponent | Score"></textarea>
    <button class="admin-only" onclick="add('results')">Add Result</button>
  </div>
</section>

<section id="news">
  <div class="card">
    <h2>News</h2>
    <table>
      <thead><tr><th>Title</th><th>Content</th><th>Actions</th></tr></thead>
      <tbody id="newsBody"></tbody>
    </table>
    <textarea id="newsInput" class="admin-only" placeholder="Title | Content"></textarea>
    <button class="admin-only" onclick="add('news')">Add News</button>
  </div>
</section>

<section id="record">
  <div class="card">
    <h2>Team Record</h2>
    <h1 id="recordText">0 - 0 - 0</h1>
    <textarea id="recordInput" class="admin-only" placeholder="W - L - T"></textarea>
    <button class="admin-only" onclick="saveRecord()">Save</button>
  </div>
</section>

</main>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getDatabase, ref, set, onValue, remove, update } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";

const app = initializeApp({
  apiKey:"AIzaSyCcl7fjelmFRMSNqrNfCTSEJxJcxj7lano",
  databaseURL:"https://infernohockey-b39f9-default-rtdb.firebaseio.com"
});
const db = getDatabase(app);

const ADMIN_USER="athenadmin";
const ADMIN_PASS="AthFon32";
let isAdmin=false;

window.show=id=>{
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
};

window.login=()=>{
  if(user.value!==ADMIN_USER||pass.value!==ADMIN_PASS) return alert("Wrong login");
  isAdmin=true;
  document.querySelectorAll(".admin-only").forEach(e=>e.style.display="block");
  logoutBtn.style.display="inline";
  show("roster");
};

window.logout=()=>{
  isAdmin=false;
  document.querySelectorAll(".admin-only").forEach(e=>e.style.display="none");
  logoutBtn.style.display="none";
};

function render(key, body, cols){
  onValue(ref(db,key), snap=>{
    body.innerHTML="";
    const data=snap.val()||{};
    Object.entries(data).forEach(([id,val])=>{
      const parts=val.split("|").map(v=>v.trim());
      if(parts.length!==cols) return;
      const tr=document.createElement("tr");
      tr.innerHTML=parts.map(p=>`<td>${p}</td>`).join("")+
        `<td>${isAdmin?
        `<button class="btn edit" onclick="edit('${key}','${id}','${val.replace(/'/g,"")}')">Edit</button>
         <button class="btn delete" onclick="del('${key}','${id}')">Delete</button>`:"--"}</td>`;
      body.appendChild(tr);
    });
  });
}

window.add=key=>{
  const i=document.getElementById(key+"Input");
  if(i.value) set(ref(db,key+"/"+Date.now()),i.value), i.value="";
};

window.del=(key,id)=> confirm("Delete?") && remove(ref(db,key+"/"+id));

window.edit=(key,id,val)=>{
  const newVal=prompt("Edit (use same format)",val);
  if(newVal) update(ref(db,key),{[id]:newVal});
};

window.saveRecord=()=>{
  if(recordInput.value) set(ref(db,"record"),recordInput.value), recordInput.value="";
};

onValue(ref(db,"record"),s=>recordText.textContent=s.val()||"0 - 0 - 0");

render("roster",rosterBody,3);
render("league",leagueBody,6);
render("coaches",coachesBody,2);
render("schedule",scheduleBody,3);
render("results",resultsBody,3);
render("news",newsBody,2);
</script>

</body>
</html>
