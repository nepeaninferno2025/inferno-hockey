<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Inferno Nepean Hockey</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#0b0b0b;
  --card:#161616;
  --accent:#ff4500;
  --text:#eee;
}
*{box-sizing:border-box}
body{margin:0;font-family:Segoe UI,Arial;background:var(--bg);color:var(--text)}

.banner{
  background:#111;
  border-bottom:2px solid var(--accent);
  padding:12px;
  text-align:center;
  font-weight:700;
  overflow:hidden;
}
#bannerText{transition:opacity .4s}

header{
  background:linear-gradient(90deg,#8b0000,#ff4500);
  padding:16px 32px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
header h1{margin:0}
nav a{
  margin-left:14px;
  color:#fff;
  text-decoration:none;
  font-weight:600;
  cursor:pointer;
}
nav a.admin{border:1px solid #fff;padding:4px 10px;border-radius:18px}
nav a.logout{display:none;color:var(--accent)}

main{max-width:1200px;margin:auto;padding:30px}
section{display:none}
section.active{display:block}

.card{background:var(--card);padding:26px;border-radius:14px;margin-bottom:30px}
h2{border-left:6px solid var(--accent);padding-left:12px}

table{width:100%;border-collapse:collapse;margin-top:14px}
th,td{border:1px solid #333;padding:8px;text-align:center}
th{background:#111;color:var(--accent)}

input,textarea,button{
  width:100%;margin-top:10px;padding:10px;
  border-radius:8px;border:none;
}
input,textarea{background:#0f0f0f;color:#fff}
button{background:var(--accent);font-weight:700;cursor:pointer}

.admin-only{display:none}
.small-btn{padding:4px 8px;font-size:12px}
.delete{background:red;color:#fff}
.edit{background:orange}
.save{background:green;color:#fff}
</style>
</head>

<body>

<!-- ðŸ”¥ MOVING BANNER -->
<div class="banner">
  <div id="bannerText">Welcome to Inferno Hockey</div>
</div>

<header>
  <h1>Inferno Nepean Hockey</h1>
  <nav>
    <a onclick="show('standings')">Standings</a>
    <a onclick="show('schedule')">Schedule</a>
    <a onclick="show('roster')">Roster</a>
    <a onclick="show('coaches')">Coaches</a>
    <a onclick="show('news')">News</a>
    <a class="admin" onclick="show('admin')">Admin</a>
    <a class="logout" id="logoutBtn" onclick="logout()">Logout</a>
  </nav>
</header>

<main>

<!-- STANDINGS -->
<section id="standings" class="active">
<div class="card">
<h2>League Standings</h2>
<table>
<thead><tr><th>Team</th><th>GP</th><th>W</th><th>L</th><th>T</th><th>PTS</th><th></th></tr></thead>
<tbody id="standingsBody"></tbody>
</table>
<textarea id="standingsInput" class="admin-only" placeholder="Team | GP | W | L | T | PTS"></textarea>
<button class="admin-only" onclick="addItem('standings',standingsInput.value)">Add Team</button>
</div>
</section>

<!-- SCHEDULE -->
<section id="schedule">
<div class="card">
<h2>Schedule & Results</h2>
<ul id="scheduleList"></ul>
<textarea id="scheduleInput" class="admin-only" placeholder="Inferno vs Hawks â€” Oct 14 @ 7:00"></textarea>
<button class="admin-only" onclick="addItem('schedule',scheduleInput.value)">Add Game</button>
</div>
</section>

<!-- ROSTER -->
<section id="roster">
<div class="card">
<h2>Player Roster</h2>
<ul id="rosterList"></ul>
<textarea id="rosterInput" class="admin-only" placeholder="#12 | John Smith | Forward"></textarea>
<button class="admin-only" onclick="addItem('roster',rosterInput.value)">Add Player</button>
</div>
</section>

<!-- COACHES -->
<section id="coaches">
<div class="card">
<h2>Coaches & Staff</h2>
<ul id="coachesList"></ul>
<textarea id="coachesInput" class="admin-only" placeholder="Head Coach | Mike Johnson"></textarea>
<button class="admin-only" onclick="addItem('coaches',coachesInput.value)">Add Coach</button>
</div>
</section>

<!-- NEWS -->
<section id="news">
<div class="card">
<h2>Team News</h2>
<ul id="newsList"></ul>
<textarea id="newsInput" class="admin-only" placeholder="Inferno wins season opener 4â€“2"></textarea>
<button class="admin-only" onclick="addItem('news',newsInput.value)">Post News</button>
</div>
</section>

<!-- ADMIN -->
<section id="admin">
<div class="card">
<h2>Admin Panel</h2>
<input id="user" placeholder="Username">
<input id="pass" type="password" placeholder="Password">
<button onclick="login()">Login</button>

<hr style="margin:30px 0;border:1px solid #333">

<h3>Banner Messages (auto-rotating)</h3>
<textarea id="bannerInput" class="admin-only" placeholder="UPCOMING: Inferno vs Sens â€” Oct 20"></textarea>
<button class="admin-only" onclick="addItem('banner',bannerInput.value)">Add Banner</button>
</div>
</section>

</main>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getDatabase, ref, set, onValue, remove } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-database.js";

const app = initializeApp({
  apiKey:"AIzaSyCcl7fjelmFRMSNqrNfCTSEJxJcxj7lano",
  databaseURL:"https://infernohockey-b39f9-default-rtdb.firebaseio.com",
  projectId:"infernohockey-b39f9"
});
const db = getDatabase(app);

const ADMIN_USER="athenadmin";
const ADMIN_PASS="AthFon32";
let isAdmin=false;

/* NAV */
window.show=id=>{
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
};

/* LOGIN */
window.login=()=>{
  if(user.value!==ADMIN_USER||pass.value!==ADMIN_PASS) return alert("Wrong login");
  isAdmin=true;
  document.querySelectorAll(".admin-only").forEach(e=>e.style.display="block");
  logoutBtn.style.display="inline";
};
window.logout=()=>{
  isAdmin=false;
  document.querySelectorAll(".admin-only").forEach(e=>e.style.display="none");
  logoutBtn.style.display="none";
};

/* ADD ITEMS */
window.addItem=(path,val)=>{
  if(!val.trim()) return;
  set(ref(db,`${path}/`+Date.now()),val);
};

/* LOAD LISTS */
function loadList(path,el){
  onValue(ref(db,path),snap=>{
    el.innerHTML="";
    const data=snap.val()||{};
    Object.keys(data).forEach(id=>{
      const li=document.createElement("li");
      li.innerHTML=data[id]+(isAdmin?
        ` <button class="small-btn delete" onclick="remove(ref(db,'${path}/${id}'))">X</button>`:"");
      el.appendChild(li);
    });
  });
}

loadList("schedule",scheduleList);
loadList("roster",rosterList);
loadList("coaches",coachesList);
loadList("news",newsList);

/* STANDINGS */
onValue(ref(db,"standings"),snap=>{
  standingsBody.innerHTML="";
  let rows=[];
  const d=snap.val()||{};
  Object.keys(d).forEach(id=>{
    const r=d[id].split("|").map(v=>v.trim());
    rows.push({id,r});
  });
  rows.sort((a,b)=>(+b.r[5]||0)-(+a.r[5]||0));
  rows.forEach(({id,r})=>{
    const tr=document.createElement("tr");
    tr.innerHTML=r.map(v=>`<td>${v}</td>`).join("")+
      `<td>${isAdmin?`<button class="small-btn delete" onclick="remove(ref(db,'standings/${id}'))">X</button>`:""}</td>`;
    standingsBody.appendChild(tr);
  });
});

/* BANNER ROTATION */
let bannerMsgs=[],bannerIndex=0;
onValue(ref(db,"banner"),snap=>{
  bannerMsgs=Object.values(snap.val()||{});
});
setInterval(()=>{
  if(!bannerMsgs.length) return;
  bannerText.style.opacity=0;
  setTimeout(()=>{
    bannerText.textContent=bannerMsgs[bannerIndex++%bannerMsgs.length];
    bannerText.style.opacity=1;
  },400);
},3500);
</script>

</body>
</html>
